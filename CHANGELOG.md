# Change Log

All notable changes to this project will be documented in this file
automatically by Versionist. DO NOT EDIT THIS FILE MANUALLY!
This project adheres to [Semantic Versioning](http://semver.org/).

## 6.2.0 - 2018-11-15

* Convert AbstractSQLOptimiser to typescript [Pagan Gazzard]
* Convert AbstractSQLRules2SQL to typescript [Pagan Gazzard]

## 6.1.2 - 2018-11-13

* Add resin-lint for typescript and a commit hook to run it [Pagan Gazzard]
* Split the types for sbvr-types into a separate definition file [Pagan Gazzard]
* Add resin-lint for coffee files [Pagan Gazzard]

## 6.1.1 - 2018-11-10

* Optimise checking for aliases with a fast lookahead check [Pagan Gazzard]
* Fix potentially incorrect `And` collapsing [Pagan Gazzard]

## v6.1.0 - 2018-11-03

* Switch to generating commonjs format [Pagan Gazzard]

## v6.0.1 - 2018-10-25

* Tighten alias/table name matches to strings [Pagan Gazzard]
* Optimise the `Select` rule by removing redundant branches [Pagan Gazzard]

## v6.0.0 - 2018-10-11

* Update to sbvr-types 2.x [Pagan Gazzard]

## v5.3.4 - 2018-10-04

* Update lf-to-abstract-sql, updating tests to match [Pagan Gazzard]
* Update dependencies [Pagan Gazzard]

## v5.3.3 - 2018-08-13

* Feature: Add support for CASE/WHEN/ELSE/END #35 [Rich Bayliss]

## v5.3.2 - 2018-07-31

* Don't try to merge `IS NULL` into an `IN` clause as it doesn't work #36 [Pagan Gazzard]

## v5.3.1 - 2018-06-24

* Make sure direct table names are strings, this avoid issues if parsing a SelectQuery fails. #33 [Pagan Gazzard]

## v5.3.0 - 2018-06-14

* Allow reusing bind parameters for the postgres backend rather than duplicating for each instance. #32 [Pagan Gazzard]

## v5.2.1 - 2018-06-09

* Update lf-to-abstract-sql and fix tests. #31 [Pagan Gazzard]

## v5.2.0 - 2018-06-08

* Add support for string bind keys #30 [Pagan Gazzard]

## v5.1.2 - 2018-06-04

* Fix `test.skip`/`test.only`/etc for the sbvr tests #28 [Pagan Gazzard]

## v5.1.1 - 2018-06-04

* Update dependencies #29 [Pagan Gazzard]

## v5.1.0 - 2018-06-01

* Change CONTAINS to use LIKE instead of STRPOS. #27 [Pagan Gazzard]
* Change EndsWith to use LIKE instead of RIGHT to avoid duplicating the needle. #27 [Pagan Gazzard]
* Change StartsWith to use LIKE instead of STRPOS so that it can make better use of indexes. #27 [Pagan Gazzard]

## v5.0.4 - 2018-05-10

* Update dependencies #25 [Pagan Gazzard]

## v5.0.3 - 2018-05-10

* Switch types to using generated declaration files, this avoids issues with the typescript code being rechecked downstream. #26 [Pagan Gazzard]

## v5.0.2 - 2018-05-10

* Require npm 4+ to publish, to avoid issues with publishing #24 [Pagan Gazzard]

## v5.0.1 - 2018-04-30

* Add node 10 to the circleci tests #23 [Pagan Gazzard]
* Move circle.yml to .circleci/config.yml #23 [Pagan Gazzard]

## v5.0.0 - 2018-04-25

* Change the references format to expect a `resourceName` rather than a `tableName` #22 [Pagan Gazzard]

## v4.1.1 - 2018-04-25

* Update tests to use odata-to-abstract-sql 1.2.0 #21 [Pagan Gazzard]

## v4.1.0 - 2018-04-23

* Support the `Or` -> `In` optimisation for cases where you have mixed comparisons in an or block, allowing it to be used in a lot more cases. #19 [Pagan Gazzard]
* Make sure the nested or optimisation hits the validator method directly, avoiding other optimisations breaking it. #19 [Pagan Gazzard]

## v4.0.0 - 2018-04-11

* Generate numbered bindings for postgres rather than ? #17 [Pagan Gazzard]

## v3.3.0 - 2018-01-05

* Add support for union queries. #16 [Pagan Gazzard]

## v3.2.2 - 2018-01-05

* Update dependencies #15 [Pagan Gazzard]

## v3.2.1 - 2017-12-11

* Lock types versions and fix type errors. #14 [Pagan Gazzard]
* Set up circleci auto-publishing #14 [Pagan Gazzard]

## v3.2.0 - 2017-10-24

* Updated dependencies and rewrote tests to account for breaking changes #12 [Giovanni Garufi]

## v3.1.0 - 2017-10-02

* Convert AbstractSQLCompiler to typescript and add typings for the OMeta parts #11 [Pagan Gazzard]
* Added versionist #11 [Giovanni Garufi]

## v3.0.0

* Changed API to pass rule bindings along with the compiled query.

## v2.3.3

* Fixed checking for unresolved dependencies

## v2.3.2

* Fixed checking of dependencies when there is self-reference for a resource where the resource name and table name are different

## v2.3.1

* Fixed added referenced fields to rules

## v2.3.0

* Add `getReferencedFields` and `getModifiedFields` functions.
* Add `referencedFields` info to compiled rules.
* Update coffeescript to ~1.12.6

## v2.2.0

* Added support for numbered binds.
* Added a test for a self-referential expand (`pilot?$expand=pilot`)

## v2.1.0

* Added a test for a rule with numbered terms.
* Added some tests from the sbvr-parser that were missing here.
* Added a non-primitive concept type test to the pilots tests.
* Added support for $count
* Added tests for $count
* Updated the client model for tests
* Updated tests

## v2.0.0

* Stopped treating an empty string as null.

## v1.2.0

* Added support for duration literals.
* Added support for `Contains`, `Now`, `Year`, `Month`, `Day`, `Hour`, `Minute`, `Second`, `FractionalSeconds`, `ToDate`, `ToTime`, and `TotalSeconds`.
* Avoided issues with wildchard characters in `Substringof`, `StartsWith`, and `EndsWith`.
* Fixed `InStr` and `IndexOf`.
* Updated the sbvr model for tests.

## v1.1.0

* `AggregateJSON` now returns an empty array instead of null in the case of zero results.
* Updated to lodash 4

## v1.0.2

* Update ometa-js

## v1.0.1

* Correctly adjust INSTR/STRPOS, INSTR is the zero-indexed one!
* Change startswith and endswith from `(needle, haystack)` to `(haystack, needle)`, to match the OData spec.
* Updated to bluebird 3.

## v0.4.2

* Update @resin/odata-to-abstract-sql to ~0.3.0, adding matching tests.

## v0.4.1

* Fixed requirejs import path.

## v0.4.0

* Added support for specifying a `defaultValue` for a field.
* Added schema generation support.
* Changed the exported `compile(engine, abstractSQL)` function to `[engine].compileRule(abstractsql)`

## v0.3.2

* Fixed an issue with auto incrementing fields of websql/mysql.

## v0.3.1

* Updated lodash to ^3.0.0
* Updated sbvr-types to v0.1.1

## v0.3.0

* Updated sbvr-types to v0.1.0
* Updated lodash to ~3.0.0

## v0.2.1

* Optimised not exists statements.
* Added tests for true/false.
* Added support for `'Null'` as well as `null` for null valus.
* Changed comparisons against null to use `IS NULL`/`IS NOT NULL`

## v0.2.0

* Switch to using bind vars for embedded number/text values.
* Switched to using multiple part UPSERT queries, allowing greater flexibility.
* Simplified NULL handling.

## v0.1.1

* Added support for CAST.

## v0.1.0

* Added support for select queries in the values clause.
